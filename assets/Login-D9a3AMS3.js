import{j as T,as as N,at as I,r as s,B as x,l as t,n as k,i as a,y as C,q as n,O as L,M as p,t as l,A as f,au as U,s as d,I as q,D as F,av as M,H as R,J as j,K as z,N as E,Q as G,_ as H}from"./index-CehNAOiO.js";import{V as J}from"./VContainer-D245ioWJ.js";import{a as K,V as O}from"./VRow-Dj5EP_aS.js";import{V as P}from"./VAlert-r_Do5ysX.js";import{V as Q}from"./VForm-Cx2nzHkh.js";import{V as _}from"./VTextField-Bv30GIbp.js";const Y={class:"text-center mt-6"},$=T({__name:"Login",setup(h){const w=G(),{login:A,loading:b,error:c}=N(),S=I(),v=s(""),V=s(""),m=s(!1),i=s(!1),g=s(""),y=s(""),u=s(!1),B=async()=>{try{const o=await A(v.value,V.value);S.setAuth(o.user,o.token,o.refreshToken),g.value="登入成功",y.value="歡迎回來！",u.value=!0,i.value=!0}catch(o){g.value="登入失敗",y.value=c.value||"帳號或密碼錯誤",u.value=!1,i.value=!0,console.error(o)}},D=()=>{i.value=!1,u.value&&w.push("/")};return(o,e)=>(k(),x(J,{class:"fill-height"},{default:t(()=>[a(O,{justify:"center"},{default:t(()=>[a(K,{cols:"12",sm:"8",md:"6",lg:"4"},{default:t(()=>[a(C,{class:"pa-8"},{default:t(()=>[e[8]||(e[8]=n("div",{class:"text-center mb-8"},[n("span",{class:"blue-diary-title"},[n("span",{class:"blue"},"BLUE"),n("span",{class:"diary"},"DIARY")])],-1)),e[9]||(e[9]=n("h2",{class:"text-h5 mb-6 text-center"},"登入帳號",-1)),p(c)?(k(),x(P,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[l(f(p(c)),1)]),_:1})):L("",!0),a(Q,{onSubmit:U(B,["prevent"])},{default:t(()=>[a(_,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=r=>v.value=r),label:"電子郵件",type:"email",required:"",variant:"outlined","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),a(_,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=r=>V.value=r),label:"密碼",type:m.value?"text":"password",required:"",variant:"outlined","prepend-inner-icon":"mdi-lock","append-inner-icon":m.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=r=>m.value=!m.value)},null,8,["modelValue","type","append-inner-icon"]),a(d,{type:"submit",color:"primary",size:"large",block:"",class:"mt-2",loading:p(b),disabled:p(b)},{default:t(()=>e[4]||(e[4]=[l(" 登入 ")])),_:1},8,["loading","disabled"])]),_:1}),n("div",Y,[a(d,{variant:"text",to:"/register"},{default:t(()=>e[5]||(e[5]=[l(" 還沒有帳號？立即註冊 ")])),_:1})]),a(q,{class:"my-6"}),a(d,{block:"",color:"red",variant:"outlined","prepend-icon":"mdi-google",class:"mb-3"},{default:t(()=>e[6]||(e[6]=[l(" 使用 Google 帳號登入 ")])),_:1}),a(d,{block:"",color:"primary",variant:"outlined","prepend-icon":"mdi-facebook"},{default:t(()=>e[7]||(e[7]=[l(" 使用 Facebook 帳號登入 ")])),_:1})]),_:1})]),_:1})]),_:1}),a(E,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=r=>i.value=r),width:"auto",persistent:""},{default:t(()=>[a(C,{"min-width":"300"},{default:t(()=>[a(F,{class:M([u.value?"text-success":"text-error","text-center"])},{default:t(()=>[l(f(g.value),1)]),_:1},8,["class"]),a(R,{class:"pt-4 text-center"},{default:t(()=>[l(f(y.value),1)]),_:1}),a(j,null,{default:t(()=>[a(z),a(d,{color:"primary",onClick:D},{default:t(()=>[l(f(u.value?"前往首頁":"確定"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),le=H($,[["__scopeId","data-v-f71e9d32"]]);export{le as default};
