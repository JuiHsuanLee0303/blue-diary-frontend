import{j as T,ba as N,r as s,B as x,l as t,n as k,i as a,y as C,q as n,O as I,M as p,t as l,A as f,bb as L,s as d,I as U,D as q,bc as F,H as M,J as R,K as j,N as z,Q as E,_ as G}from"./index-BUUJBkJA.js";import{u as H}from"./authService-BnktzKJc.js";import{V as J}from"./VContainer-CgAhKj_n.js";import{a as K,V as O}from"./VRow-DLDdk7tM.js";import{V as P}from"./VAlert-CJP7fa0r.js";import{V as Q}from"./VForm-H0Rji8VA.js";import{V as _}from"./VTextField-C8q4Kbh-.js";import"./index-DW_MHI2K.js";const Y={class:"text-center mt-6"},$=T({__name:"Login",setup(h){const w=E(),{login:A,loading:y,error:c}=H(),S=N(),v=s(""),V=s(""),m=s(!1),i=s(!1),b=s(""),g=s(""),u=s(!1),B=async()=>{try{const o=await A(v.value,V.value);S.setAuth(o.user,o.token,o.refreshToken),b.value="登入成功",g.value="歡迎回來！",u.value=!0,i.value=!0}catch(o){b.value="登入失敗",g.value=c.value||"帳號或密碼錯誤",u.value=!1,i.value=!0,console.error(o)}},D=()=>{i.value=!1,u.value&&w.push("/")};return(o,e)=>(k(),x(J,{class:"fill-height"},{default:t(()=>[a(O,{justify:"center"},{default:t(()=>[a(K,{cols:"12",sm:"8",md:"6",lg:"4"},{default:t(()=>[a(C,{class:"pa-8"},{default:t(()=>[e[8]||(e[8]=n("div",{class:"text-center mb-8"},[n("span",{class:"blue-diary-title"},[n("span",{class:"blue"},"BLUE"),n("span",{class:"diary"},"DIARY")])],-1)),e[9]||(e[9]=n("h2",{class:"text-h5 mb-6 text-center"},"登入帳號",-1)),p(c)?(k(),x(P,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[l(f(p(c)),1)]),_:1})):I("",!0),a(Q,{onSubmit:L(B,["prevent"])},{default:t(()=>[a(_,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=r=>v.value=r),label:"電子郵件",type:"email",required:"",variant:"outlined","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),a(_,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=r=>V.value=r),label:"密碼",type:m.value?"text":"password",required:"",variant:"outlined","prepend-inner-icon":"mdi-lock","append-inner-icon":m.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=r=>m.value=!m.value)},null,8,["modelValue","type","append-inner-icon"]),a(d,{type:"submit",color:"primary",size:"large",block:"",class:"mt-2",loading:p(y),disabled:p(y)},{default:t(()=>e[4]||(e[4]=[l(" 登入 ")])),_:1},8,["loading","disabled"])]),_:1}),n("div",Y,[a(d,{variant:"text",to:"/register"},{default:t(()=>e[5]||(e[5]=[l(" 還沒有帳號？立即註冊 ")])),_:1})]),a(U,{class:"my-6"}),a(d,{block:"",color:"red",variant:"outlined","prepend-icon":"mdi-google",class:"mb-3"},{default:t(()=>e[6]||(e[6]=[l(" 使用 Google 帳號登入 ")])),_:1}),a(d,{block:"",color:"primary",variant:"outlined","prepend-icon":"mdi-facebook"},{default:t(()=>e[7]||(e[7]=[l(" 使用 Facebook 帳號登入 ")])),_:1})]),_:1})]),_:1})]),_:1}),a(z,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=r=>i.value=r),width:"auto",persistent:""},{default:t(()=>[a(C,{"min-width":"300"},{default:t(()=>[a(q,{class:F([u.value?"text-success":"text-error","text-center"])},{default:t(()=>[l(f(b.value),1)]),_:1},8,["class"]),a(M,{class:"pt-4 text-center"},{default:t(()=>[l(f(g.value),1)]),_:1}),a(R,null,{default:t(()=>[a(j),a(d,{color:"primary",onClick:D},{default:t(()=>[l(f(u.value?"前往首頁":"確定"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),oe=G($,[["__scopeId","data-v-f71e9d32"]]);export{oe as default};
