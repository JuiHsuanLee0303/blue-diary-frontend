import{j as X,r as w,e as I,L as Y,B as f,l,P as Z,Q as ee,n,k as _,i as e,M as C,v as le,t as o,A as r,q as c,s as b,K as P,y as p,D as x,z as d,H as y,F as k,x as h,O as ae,J as S,N as j,V as A,_ as te}from"./index-BI7B1XWn.js";import{u as se}from"./diveLogService-ltdzyFFC.js";import{V as oe}from"./VContainer-Dn1n-nht.js";import{V as v,a as m}from"./VRow-BNl8M-r9.js";import{V as ie}from"./VAlert-BkyfsjUA.js";import{V as ne}from"./VChip-C_5-FXwu.js";import"./index-DW_MHI2K.js";const ue={class:"text-h4 ml-4"},re={class:"text-subtitle-2 text-medium-emphasis d-flex align-center mb-2"},de={class:"font-weight-medium text-body-1"},ce={class:"text-subtitle-2 text-medium-emphasis d-flex align-center mb-2"},me={class:"font-weight-medium text-body-1"},ve={class:"text-subtitle-2 text-medium-emphasis d-flex align-center mb-2"},fe={class:"font-weight-medium text-body-1"},pe={class:"text-body-1"},ge={key:0,class:"text-center text-medium-emphasis pa-6"},_e=X({__name:"DiveLogDetail",setup(be){const R=Z(),$=ee(),{getDiveLog:q,deleteDiveLog:F,loading:M,error:T}=se(),t=w(null),L=w(!1),V=w(!1),z=i=>i?new Date(i).toLocaleDateString("zh-TW"):"",U=async()=>{const i=R.params.id;if(!i){$.push("/dive-log");return}try{t.value=await q(i),console.log(t.value)}catch(a){console.error(a)}},E=()=>{V.value=!0},H=()=>{V.value=!1},J=async()=>{var i;if((i=t.value)!=null&&i.id){L.value=!0;try{await F(t.value.id),$.push("/dive-log")}catch(a){console.error(a)}finally{L.value=!1,V.value=!1}}},D=w(!1),B=w(""),K=i=>{B.value=i,D.value=!0},O=I(()=>t.value?[{label:"日期",value:z(t.value.date),icon:"mdi-calendar"},{label:"時間",value:t.value.time,icon:"mdi-clock"},{label:"地點",value:t.value.location,icon:"mdi-map-marker"},{label:"潛水時間",value:`${t.value.duration} 分鐘`,icon:"mdi-timer"},{label:"最大深度",value:`${t.value.maxDepth} 公尺`,icon:"mdi-arrow-collapse-down"}]:[]),Q=I(()=>t.value?[{label:"氣溫",value:`${t.value.airTemp}°C`,icon:"mdi-thermometer"},{label:"水溫",value:`${t.value.waterTemp}°C`,icon:"mdi-thermometer-water"},{label:"天氣",value:t.value.weather,icon:"mdi-weather-sunny"},{label:"水域類型",value:t.value.waterType,icon:"mdi-waves"},{label:"潮流",value:t.value.current,icon:"mdi-current-ac"},{label:"浪況",value:t.value.waveCondition,icon:"mdi-wave"},{label:"能見度",value:`${t.value.visibility} 公尺`,icon:"mdi-eye"}]:[]),W=I(()=>{var i;return t.value?[{label:"配重",value:`${t.value.weight} 公斤`,icon:"mdi-weight"},{label:"氣瓶類型",value:t.value.tankType,icon:"mdi-diving-scuba-tank"},{label:"開始氣量",value:`${t.value.startPressure} bar`,icon:"mdi-gauge"},{label:"結束氣量",value:`${t.value.endPressure} bar`,icon:"mdi-gauge-empty"},{label:"潛伴",value:((i=t.value.buddies)==null?void 0:i.join(", "))||"無",icon:"mdi-account-group"},{label:"潛店",value:t.value.diveShop||"無",icon:"mdi-store"}]:[]});return Y(()=>{U()}),(i,a)=>(n(),f(oe,null,{default:l(()=>[C(M)?(n(),f(v,{key:0},{default:l(()=>[e(m,{cols:"12",class:"text-center"},{default:l(()=>[e(le,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):C(T)?(n(),f(v,{key:1},{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(ie,{type:"error",variant:"tonal"},{default:l(()=>[o(r(C(T)),1)]),_:1})]),_:1})]),_:1})):(n(),_(k,{key:2},[e(v,{class:"mt-6"},{default:l(()=>[e(m,{cols:"12",class:"d-flex align-center"},{default:l(()=>{var s,u;return[e(b,{icon:"mdi-arrow-left",variant:"text",onClick:a[0]||(a[0]=g=>C($).back())}),c("h1",ue,r((s=t.value)==null?void 0:s.name),1),e(ne,{class:"ml-4",color:"primary"},{default:l(()=>{var g;return[o(r(z((g=t.value)==null?void 0:g.date)),1)]}),_:1}),e(P),e(b,{color:"primary","prepend-icon":"mdi-pencil",to:`/dive-log/${(u=t.value)==null?void 0:u.id}/edit`,class:"mr-2"},{default:l(()=>a[4]||(a[4]=[o(" 編輯 ")])),_:1},8,["to"]),e(b,{color:"error",variant:"outlined",loading:L.value,"prepend-icon":"mdi-delete",onClick:E},{default:l(()=>a[5]||(a[5]=[o(" 刪除 ")])),_:1},8,["loading"])]}),_:1})]),_:1}),e(v,{class:"mt-4"},{default:l(()=>[e(m,{cols:"12",md:"8"},{default:l(()=>[e(p,{class:"mb-6"},{default:l(()=>[e(x,{class:"d-flex align-center"},{default:l(()=>[e(d,{icon:"mdi-information",class:"mr-2"}),a[6]||(a[6]=o(" 基本資訊 "))]),_:1}),e(y,{class:"pa-6"},{default:l(()=>[e(v,null,{default:l(()=>[(n(!0),_(k,null,h(O.value,(s,u)=>(n(),f(m,{key:u,cols:"12",sm:"6",md:"4"},{default:l(()=>[c("div",re,[e(d,{icon:s.icon,size:"small",class:"mr-2"},null,8,["icon"]),o(" "+r(s.label),1)]),c("div",de,r(s.value),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(p,{class:"mb-6"},{default:l(()=>[e(x,{class:"d-flex align-center"},{default:l(()=>[e(d,{icon:"mdi-weather-partly-cloudy",class:"mr-2"}),a[7]||(a[7]=o(" 環境資訊 "))]),_:1}),e(y,{class:"pa-6"},{default:l(()=>[e(v,null,{default:l(()=>[(n(!0),_(k,null,h(Q.value,(s,u)=>(n(),f(m,{key:u,cols:"12",sm:"6",md:"4"},{default:l(()=>[c("div",ce,[e(d,{icon:s.icon,size:"small",class:"mr-2"},null,8,["icon"]),o(" "+r(s.label),1)]),c("div",me,r(s.value),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(p,{class:"mb-6"},{default:l(()=>[e(x,{class:"d-flex align-center"},{default:l(()=>[e(d,{icon:"mdi-diving-scuba-tank",class:"mr-2"}),a[8]||(a[8]=o(" 裝備資訊 "))]),_:1}),e(y,{class:"pa-6"},{default:l(()=>[e(v,null,{default:l(()=>[(n(!0),_(k,null,h(W.value,(s,u)=>(n(),f(m,{key:u,cols:"12",sm:"6",md:"4"},{default:l(()=>[c("div",ve,[e(d,{icon:s.icon,size:"small",class:"mr-2"},null,8,["icon"]),o(" "+r(s.label),1)]),c("div",fe,r(s.value),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(x,{class:"d-flex align-center"},{default:l(()=>[e(d,{icon:"mdi-note-text",class:"mr-2"}),a[9]||(a[9]=o(" 備註 "))]),_:1}),e(y,{class:"pa-6"},{default:l(()=>{var s;return[c("p",pe,r(((s=t.value)==null?void 0:s.notes)||"無備註"),1)]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(p,null,{default:l(()=>[e(x,{class:"d-flex align-center"},{default:l(()=>[e(d,{icon:"mdi-image-multiple",class:"mr-2"}),a[10]||(a[10]=o(" 照片 "))]),_:1}),e(y,{class:"pa-6"},{default:l(()=>{var s,u;return[e(v,{dense:""},{default:l(()=>{var g;return[(n(!0),_(k,null,h((g=t.value)==null?void 0:g.images,(N,G)=>(n(),f(m,{key:G,cols:"12"},{default:l(()=>[e(A,{src:N,"aspect-ratio":"16/9",cover:"",class:"rounded-lg mb-4",onClick:xe=>K(N)},null,8,["src","onClick"])]),_:2},1024))),128))]}),_:1}),(u=(s=t.value)==null?void 0:s.images)!=null&&u.length?ae("",!0):(n(),_("div",ge,[e(d,{icon:"mdi-image-off",size:"48",color:"grey"}),a[11]||(a[11]=c("div",{class:"mt-4"},"無照片",-1))]))]}),_:1})]),_:1})]),_:1})]),_:1})],64)),e(j,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=s=>V.value=s),width:"auto"},{default:l(()=>[e(p,null,{default:l(()=>[e(x,{class:"text-center"},{default:l(()=>[e(d,{icon:"mdi-alert",color:"error",class:"mr-2"}),a[12]||(a[12]=o(" 確認刪除 "))]),_:1}),e(y,{class:"pt-4 text-center"},{default:l(()=>a[13]||(a[13]=[o(" 確定要刪除這筆潛水日誌嗎？此操作無法復原。 ")])),_:1}),e(S,null,{default:l(()=>[e(P),e(b,{color:"grey",variant:"text",onClick:H},{default:l(()=>a[14]||(a[14]=[o(" 取消 ")])),_:1}),e(b,{color:"error",onClick:J},{default:l(()=>a[15]||(a[15]=[o("確定刪除")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:D.value,"onUpdate:modelValue":a[3]||(a[3]=s=>D.value=s),width:"auto"},{default:l(()=>[e(p,null,{default:l(()=>[e(A,{src:B.value,"max-height":"90vh",contain:""},null,8,["src"]),e(S,{class:"justify-end"},{default:l(()=>[e(b,{icon:"mdi-close",variant:"text",onClick:a[2]||(a[2]=s=>D.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),$e=te(_e,[["__scopeId","data-v-5921df79"]]);export{$e as default};
