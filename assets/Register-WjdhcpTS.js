import{j as q,as as N,at as I,r as s,B as A,l,n as B,i as a,y as S,q as n,O as M,M as f,t as r,A as c,au as P,s as w,D as j,av as z,H as F,J as $,K as E,N as H,Q as J,_ as K}from"./index-CehNAOiO.js";import{V as L}from"./VContainer-D245ioWJ.js";import{a as O,V as Q}from"./VRow-Dj5EP_aS.js";import{V as Y}from"./VAlert-r_Do5ysX.js";import{V as h}from"./VForm-Cx2nzHkh.js";import{V}from"./VTextField-Bv30GIbp.js";const G={class:"text-center mt-6"},W=q({__name:"Register",setup(X){const _=J(),{register:D,loading:k,error:d}=N(),R=I(),y=s(""),g=s(""),p=s(""),x=s(""),m=s(!1),v=s(!1),u=s(!1),b=s(""),C=s(""),i=s(!1),T=async()=>{if(p.value!==x.value){d.value="密碼不一致";return}try{const o=await D(y.value,g.value,p.value);R.setAuth(o.user,o.token,o.refreshToken),b.value="註冊成功",C.value="歡迎加入 Blue Diary！",i.value=!0,u.value=!0}catch(o){b.value="註冊失敗",C.value=d.value||"發生未知錯誤",i.value=!1,u.value=!0,console.error(o)}},U=()=>{u.value=!1,i.value&&_.push("/login")};return(o,e)=>(B(),A(L,{class:"fill-height"},{default:l(()=>[a(Q,{justify:"center"},{default:l(()=>[a(O,{cols:"12",sm:"8",md:"6",lg:"4"},{default:l(()=>[a(S,{class:"pa-8"},{default:l(()=>[e[9]||(e[9]=n("div",{class:"text-center mb-8"},[n("span",{class:"blue-diary-title"},[n("span",{class:"blue"},"BLUE"),n("span",{class:"diary"},"DIARY")])],-1)),e[10]||(e[10]=n("h2",{class:"text-h5 mb-6 text-center"},"註冊帳號",-1)),f(d)?(B(),A(Y,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:l(()=>[r(c(f(d)),1)]),_:1})):M("",!0),a(h,{onSubmit:P(T,["prevent"])},{default:l(()=>[a(V,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),label:"姓名",required:"",variant:"outlined","prepend-inner-icon":"mdi-account"},null,8,["modelValue"]),a(V,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),label:"電子郵件",type:"email",required:"",variant:"outlined","prepend-inner-icon":"mdi-email"},null,8,["modelValue"]),a(V,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),label:"密碼",type:m.value?"text":"password",required:"",variant:"outlined","prepend-inner-icon":"mdi-lock","append-inner-icon":m.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[3]||(e[3]=t=>m.value=!m.value)},null,8,["modelValue","type","append-inner-icon"]),a(V,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=t=>x.value=t),label:"確認密碼",type:v.value?"text":"password",required:"",variant:"outlined","prepend-inner-icon":"mdi-lock-check","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[5]||(e[5]=t=>v.value=!v.value)},null,8,["modelValue","type","append-inner-icon"]),a(w,{type:"submit",color:"primary",size:"large",block:"",class:"mt-2",loading:f(k),disabled:f(k)},{default:l(()=>e[7]||(e[7]=[r(" 註冊 ")])),_:1},8,["loading","disabled"])]),_:1}),n("div",G,[a(w,{variant:"text",to:"/login"},{default:l(()=>e[8]||(e[8]=[r(" 已有帳號？立即登入 ")])),_:1})])]),_:1})]),_:1})]),_:1}),a(H,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),width:"auto",persistent:""},{default:l(()=>[a(S,{"min-width":"300"},{default:l(()=>[a(j,{class:z([i.value?"text-success":"text-error","text-center"])},{default:l(()=>[r(c(b.value),1)]),_:1},8,["class"]),a(F,{class:"pt-4 text-center"},{default:l(()=>[r(c(C.value),1)]),_:1}),a($,null,{default:l(()=>[a(E),a(w,{color:"primary",onClick:U},{default:l(()=>[r(c(i.value?"前往登入頁面":"確定"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),oe=K(W,[["__scopeId","data-v-913d32ee"]]);export{oe as default};
